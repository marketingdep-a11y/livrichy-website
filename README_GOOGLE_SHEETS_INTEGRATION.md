# ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Google Sheets –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –∞–≥–µ–Ω—Ç–æ–≤ - –ì–û–¢–û–í–û

## –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–∞–∫–µ—Ç Google API Client
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `google/apiclient` —á–µ—Ä–µ–∑ Composer
- –ü–∞–∫–µ—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### 2. ‚úÖ –°–æ–∑–¥–∞–Ω —Å–µ—Ä–≤–∏—Å –∏–º–ø–æ—Ä—Ç–∞
**–§–∞–π–ª:** `app/Services/AgentImport/GoogleSheetsAgentImporter.php`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Google Sheets API
- –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
- –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π:
  - `Agent' ID` ‚Üí `external_id`
  - `Name Of Agent` ‚Üí `title`
  - `Position` ‚Üí `position`
  - `Photo` ‚Üí `image` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ)
  - `Bio` ‚Üí `content` (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Bard)
  - `Status` ‚Üí —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ "Published"
- –ò–º–ø–æ—Ä—Ç —Ç–æ–ª—å–∫–æ –∞–≥–µ–Ω—Ç–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "Published"
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ** –∞–≥–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ "Published"
- –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### 3. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –∫–æ–Ω—Å–æ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
**–§–∞–π–ª:** `app/Console/Commands/SyncGoogleSheetsAgents.php`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
php artisan import:google-sheets-agents
```

### 4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
**–§–∞–π–ª:** `app/Console/Kernel.php`

**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:**
- –ö–∞–∂–¥—É—é **—Å—Ä–µ–¥—É** –≤ **18:00 UAE** (14:00 UTC)
- –° –∑–∞—â–∏—Ç–æ–π –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ (withoutOverlapping)
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (onOneServer)
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (runInBackground)

### 5. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
**–§–∞–π–ª:** `config/services.php`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `spreadsheet_id` - ID Google Sheets –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `range` - –¥–∏–∞–ø–∞–∑–æ–Ω —è—á–µ–µ–∫ –¥–ª—è —á—Ç–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: Table1!A2:H)
- `credentials_path` - –ø—É—Ç—å –∫ JSON —Ñ–∞–π–ª—É —Å credentials

### 6. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
**–§–∞–π–ª—ã:**
- `GOOGLE_SHEETS_SETUP.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- `env.google-sheets.example` - –ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

### 1. –ü–æ–ª—É—á–∏—Ç—å Google API Credentials

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ —Ñ–∞–π–ª–µ `GOOGLE_SHEETS_SETUP.md`:
- –°–æ–∑–¥–∞–π—Ç–µ Google Cloud Project
- –í–∫–ª—é—á–∏—Ç–µ Google Sheets API
- –°–æ–∑–¥–∞–π—Ç–µ Service Account
- –°–∫–∞—á–∞–π—Ç–µ JSON —Ñ–∞–π–ª —Å credentials
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å credentials —Ñ–∞–π–ª

```bash
# –ü–æ–º–µ—Å—Ç–∏—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π JSON —Ñ–∞–π–ª –≤:
storage/app/google-credentials.json
```

### 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à `.env` —Ñ–∞–π–ª:

```env
GOOGLE_SHEETS_AGENTS_SPREADSHEET_ID=–≤–∞—à_spreadsheet_id
GOOGLE_SHEETS_AGENTS_RANGE=Table1!A2:H
GOOGLE_SHEETS_AGENTS_CREDENTIALS_PATH=/Users/paveltraskou/Documents/Livrichy/mysite/storage/app/google-credentials.json
```

### 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç

```bash
php artisan import:google-sheets-agents
```

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:** –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Google Sheets –∏ —á–∏—Ç–∞–µ—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:** –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–≥–µ–Ω—Ç—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "Published"
3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:**
   - –°–æ–∑–¥–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã
   - –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∞–≥–µ–Ω—Ç—ã
   - **–£–¥–∞–ª—è—é—Ç—Å—è** –∞–≥–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ "Published"
4. **–û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å:** –í—ã–≤–æ–¥–∏—Ç—Å—è –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

## –§–æ—Ä–º–∞—Ç —Ç–∞–±–ª–∏—Ü—ã

| –ö–æ–ª–æ–Ω–∫–∞ | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|----------|
| A | Agent' ID | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∞–≥–µ–Ω—Ç–∞ |
| B | LastUpdated | –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |
| C | Department | –û—Ç–¥–µ–ª (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è) |
| D | Name Of Agent | –ò–º—è –∞–≥–µ–Ω—Ç–∞ |
| E | Position | –î–æ–ª–∂–Ω–æ—Å—Ç—å |
| F | Photo | URL —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ |
| G | Bio | –ë–∏–æ–≥—Ä–∞—Ñ–∏—è |
| H | Status | –°—Ç–∞—Ç—É—Å ("Published" –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏) |

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

–ö–æ–º–∞–Ω–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—É—é **—Å—Ä–µ–¥—É –≤ 18:00 UAE**.

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Laravel Scheduler –∑–∞–ø—É—â–µ–Ω –≤ cron:

```bash
* * * * * cd /Users/paveltraskou/Documents/Livrichy/mysite && php artisan schedule:run >> /dev/null 2>&1
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
php artisan schedule:list

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–¥–∞—á–∏ –≤—Ä—É—á–Ω—É—é (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
php artisan schedule:run
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–§–∞–π–ª—ã:**
- `app/Services/AgentImport/GoogleSheetsAgentImporter.php` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å
- `app/Console/Commands/SyncGoogleSheetsAgents.php` - –∫–æ–Ω—Å–æ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
- `app/Console/Kernel.php` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥—ã –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- `config/services.php` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `google/apiclient` v2.18.4

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
–í—Å–µ –æ—à–∏–±–∫–∏ –∏ –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ Laravel log.

---

üéâ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ `GOOGLE_SHEETS_SETUP.md` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è Google API credentials.

